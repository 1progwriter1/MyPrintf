     1                                  ;:================================================
     2                                  ;: 0-MacOS-nasm-64.s                   (c)Ded,2012
     3                                  ;:================================================
     4                                  
     5                                  ; nasm -f macho64 -l 1-nasm.lst 1-nasm.s  ;  ld -s -o 1-nasm 1-nasm.o
     6                                  
     7                                  section .text
     8                                  
     9                                  global start                   ; predefined entry point name for MacOS ld
    10                                  
    11 00000000 B804000002              start:      mov rax, 0x2000004 ; write64bsd (rdi, rsi, rdx) ... r10, r8, r9
    12 00000005 BF01000000                          mov rdi, 1         ; stdout
    13 0000000A 48BE-                               mov rsi, Msg
    13 0000000C [0000000000000000] 
    14 00000014 BA0A000000                          mov rdx, MsgLen    ; strlen (Msg)
    15 00000019 0F05                                syscall
    16                                  
    17 0000001B B801000002                          mov rax, 0x2000001 ; exit64bsd (rdi)
    18 00000020 4831FF                              xor rdi, rdi
    19 00000023 0F05                                syscall
    20                                  
    21                                  section     .data
    22                                  
    23 00000000 5F5F486C6C77726C64-     Msg:        db "__Hllwrld", 0x0a
    23 00000009 0A                 
    24                                  MsgLen      equ $ - Msg
